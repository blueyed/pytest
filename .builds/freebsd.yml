image: freebsd/12.x

sources:
  - https://github.com/blueyed/pytest

packages:
  - py36-tox

environment:
  PYTEST_ADDOPTS: --showlocals --durations=100
  # NOTE: no numpy, since it has no wheel.
  TOXENV: py36-pexpect-twisted
  PYTEST_COVERAGE: 1

tasks:
  - install: |
      cd pytest
      tox --notest

  - test: |
      cd pytest
      tox -vv -- --exitfirst
